
@{
    ViewBag.Title = "UserDefinition";
    Layout = "~/Views/Shared/Form_Layout.cshtml";
}

<script src="~/Scripts/Admin/UserList.js"></script>
<script src="~/Scripts/Admin/UserForm.js"></script>
<form id="form_user" class="form-horizontal" data-role="validator" novalidate="novalidate">
    <div class="row">
        <div class="col-xs-4">
            <div id="user_grid">
                <div id="grid_userList" class="grid"></div>
            </div>
        </div>
        <div class="col-xs-8">
            <div id="check">
                <div class="row">
                    <div class="col-xs-4">
                        <div class="form-group">
                            <label for="txtUserId" id="lbl_txtUserId" class="col-sm-4 control-label required" data-toggle="tooltip" data-placement="bottom">User Id:</label>
                            <div class=" col-sm-7">
                                <input type="text" class="form-control" name="user_id" id="txtUserId" maxlength="20" data-toggle="tooltip" data-placement="bottom">
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-4">
                        <div class="form-group">
                            <label for="txtUserName" id="lbl_txtUserName" class="col-sm-4 control-label required" data-toggle="tooltip" data-placement="bottom">UserName:</label>
                            <div class="col-sm-7">
                                <input type="text" class="form-control" name="user_name" id="txtUserName" maxlength="512" data-toggle="tooltip" data-placement="bottom">
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-4">
                        <div class="form-group">
                            <label for="txtValidity" id="lbl_txtValidity" class=" col-sm-4 control-label" style="padding-right: 0px" data-toggle="tooltip" data-placement="bottom">Valid until:</label>
                            <div class=" col-sm-7">
                                <input class="cusDate" id="txtValidity" data-role='datepicker' name="valid_until" onkeypress="return date_validate(event)" style="width:100%;" data-checkdate-msg='Enter valid date' data-toggle="tooltip" data-placement="bottom" />
                                <span data-for='valid' class='k-invalid-msg'></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-4">
                        <div class=" form-group">
                            <label for="txtEmailId" id="lbl_txtEmailId" class=" col-sm-4 control-label" data-toggle="tooltip" data-placement="bottom">Email Id:</label>
                            <div class=" col-sm-7">
                                <input type="email" class="form-control" id="txtEmailId" maxlength="512" name="email_id" data-toggle="tooltip" data-placement="bottom">
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-4">
                        <div class="form-group">
                            <label for="txtPassword" id="lbl_txtPassword" class=" col-sm-4 control-label required" data-toggle="tooltip" data-placement="bottom">Password:</label>
                            <div class="col-sm-7">
                                <input type="password" class="form-control" name="user_password" id="txtPassword" maxlength="512" data-toggle="tooltip" data-placement="bottom">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label for="txtMobile" id="lbl_txtMobile" class="col-sm-4 control-label required" data-toggle="tooltip" data-placement="bottom" style="padding-right:0px">Mobile No:</label>
                            <div class="col-sm-7">
                                <input type="text" class="form-control number" name="user_mobile" id="txtMobile" maxlength="13" data-toggle="tooltip" data-placement="bottom">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-4">
                        <div class="form-group">
                            <label for="cmbUserOf" id="lbl_cmbUserOf" class=" col-sm-4 control-label required" data-toggle="tooltip" data-placement="bottom">Department:</label>
                            <div class=" col-sm-7">
                                <input id="cmbUserOf" name="user_of_code" data-role="filtercombo" style="width:100%" data-toggle="tooltip" data-placement="bottom" />
                            </div>
                        </div>
                    </div>
                    @*<div class="col-xs-4">
                            <div class="form-group">
                                <label for="cmbPermission" id="lbl_cmbPermission" class="col-sm-4 control-label">Permission</label>
                                <div class="col-sm-7">
                                    <input id="cmbPermission" data-role="filtercombo" style="width: 100%;" name="permission" />
                                </div>
                            </div>
                        </div>*@
                    <div class="col-xs-4">
                        <div class="form-group" style="margin-bottom:0px">
                            <label for="file" class=" col-sm-3 control-label">Image</label>
                            <input type="hidden" id="txtImageHidden" name="profile_photo" />
                            <img id="Profile_img" src="~/images/NoImage.png" class="col-sm-4 img-circle profileImg" alt="User Image" style="height:100px" />
                            <div class=" col-sm-2">
                                <button type="button" id="btn_down" class="btn btn-sm btn-primary" onclick="browseTemplateFile();">Browse</button>
                                <input type="file" id="templateFile" src="~/images/noimage.png" style="width: 96px;display:none" value="Choose" accept="image/x-png, image/gif, image/jpeg" />
                            </div>
                        </div>
                    </div>
                    <div style="display:none">
                        <div class="form-group" style=" display:none">
                            <label for="txtMode" class="control-label">Mode Flag</label>
                            <div>
                                <input type="text" name="mode_flag" id="txtMode" class="form-control" readonly>
                            </div>
                        </div>
                    </div>
                    <div style="display:none">
                        <div class="form-group" style=" display:none">
                            <label for="txtApprove" class="control-label">Approve code</label>
                            <div>
                                <input type="text" name="approver_code" id="txtApprove" class="form-control" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class=" col-md-12 ">
                    <ul class="nav nav-tabs" role="tablist" id="tabs_ul">
                        <li class="active">
                            <a href="#permission" id="TabPermission" class="TabBar" role="tab" data-toggle="tab" style="color: black; padding: 3px 10px;background: cornflowerblue;">
                                Roles
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane fade active in" id="permission">
                            <div id="role">
                                <div id="grid_role_detail" class="grid">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="grid_role_detail_template">
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<style>
    #grid_user_detail input[type=checkbox] {
        margin: 4px 41px 0;
    }

    .black-tooltip {
        background-color: black !important;
        color: white !important;
        font-size: 12px;
    }

    .k-window {
        top: 45.5px !important;
    }

    .k-window-titlebar .k-window-actions {
        display: block;
    }
</style>

<style>
    #grid_userList table {
        min-width: 100%;
    }

    #grid_userList .k-grid-toolbar {
        display: none;
    }

    .k-pager-sizes {
        display: none
    }
</style>
<script>
    $(document).ready(function () {
        var full_height = $('.content-wrapper').css('min-height').replace('px', '');
        grid_height = parseInt(full_height) - 235;
        $('#grid_userList .k-grid-content').height(grid_height);

        var full_height = $('.content-wrapper').css('min-height').replace('px', '');
        grid_height = parseInt(full_height) - 433;
        $('#grid_role_detail .k-grid-content').height(grid_height);

        $("#lblFormTitle").text("User Definition");
    });


    function form_create() {
        single_fetch("");
        $("#txtUserId").removeAttr('readonly');
        $('#txtStatus').val('New');
        $('#txtMode').val('I');
    }
</script>
<script type="text/x-kendo-template" id="grid_role_detail_template" style="color:Black">
    <div class="modal-body" id="pnlRolePermission">
        <div class="row">
            <div class="col-sm-3" style="display:none">
                <div class="form-group">
                    <label for="txt_role_id" class="col-sm-3 control-label">Role Id</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control input-sm" id="txt_role_id" readonly name="role_id" style="height:20px">
                    </div>
                </div>
            </div>
            <div class="col-sm-5">
                <div class="form-group">
                    <label for="txt_role_description" class="col-sm-4 control-label" style="font-weight:400">Role Description</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control input-sm" id="txt_role_description" readonly name="role_description" style="height:20px">
                    </div>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="form-group">
                    <label for="txt_role_status" class="col-sm-3 control-label" style="font-weight:400">Status</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control input-sm" id="txt_role_status" readonly name="role_status" style="height:20px">
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="margin-top:10px">
            <div class="col-sm-11">
                <div id="grid_role_permission"></div>
            </div>
        </div>
    </div>
</script>
<script>
    save_wnd_permission = $("#grid_role_detail_template").kendoWindow({
        title: "Roles Permission",
        modal: true,
        draggable: false,
        visible: false,
        resizable: false,
        width: 1000,
    }).data("kendoWindow");

</script>

